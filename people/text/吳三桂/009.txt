
寧遠城總兵官吳三桂接到崇禎皇帝在崇禎十七年三月初六日發出的聖旨，立刻率領寧遠城及附近各衛所軍民五十萬人，放棄寧遠城，撤退入山海關，全力保衛京城。三月十九日抵達山海關。同一日清晨，李自成大軍在守城門的太監投降開門之下，攻入北京城，崇禎皇帝無路可逃，登上紫禁城北面的煤山（景山），自縊而死，李自成順利控制北京城。

李自成大軍入城之後，雖然發佈安民告示，並且招安明朝舊臣，請他們為新朝效力，但李自成無力約束部屬，流寇出身的將領、軍官、士兵開始侵佔前朝貴族、大臣的府邸，而且強迫他們獻出家財，稱為「追贓」，以酷刑威逼，不少人因而重傷、喪命。隨後「追贓」擴大，甚至一般稍有資產的百姓也未能倖免，北京城內一片恐慌。吳三桂的父親吳襄亦被「追贓」受了酷刑。大順的第二號人物劉宗敏佔據了田貴妃父親田皇親（田弘遇）的府邸，田皇親雖然已去世，但家眷及財產被劉宗敏沒收，其中包括田皇親從江南帶到北京的名妓陳圓圓。

陳圓圓據說是常州人，自幼家貧，被賣入青樓（妓院）。由於她生得聰明美麗，被妓院主人培養為專門侍候名公巨卿的藝妓，由專人教習詩詞書畫、戲曲歌舞。十六歲時到蘇州演唱崑曲，名氣急升，其後往來於蘇州、南京之間。由於圓圓能歌善舞，色藝冠時，被譽為「秦淮八艷」之一。所謂「秦淮八艷」即馬湘蘭、卞玉京、李香君、柳如是、董小宛、顧橫波、寇白門、陳圓圓。受到江南才子、名士、富商、權貴所追捧。

崇禎十五、六年，田貴妃的父親田弘遇為了討好崇禎帝，親自下江南選美，以巨資為陳圓圓、楊宛、顧秦等名妓贖身，帶到北京，準備獻給崇禎皇帝。然而當時明朝內外交困，戰亂頻仍，崇禎無心逸樂，拒絕了田弘遇。於是陳圓圓等人留在田府。據說，某日吳三桂入朝，田弘遇宴請吳三桂，因此得與陳圓圓會面，一見傾心，田弘遇玉成好事，把圓圓贈送給吳三桂為妾。吳三桂由皇命在身，急於返回邊疆，圓圓仍留在田府。不久田弘遇病死，李自成大軍入北京，崇禎帝自縊殉國，明朝滅亡。李自成手下二號人物劉宗敏佔據田府，陳圓圓落在劉宗敏手中。由於當時情況混亂，其後流傳不同版本的說法，例如成書於數十年後的《平吳錄》一書說：
「甲申三月，李自成破京師，懷宗（崇禎帝）以身殉，自成遂僭位，稱永昌。二年，勒百官助餉，抄吳驤家，得陳沅（圓圓），悅之，欲立為妃。一云，為權將軍所得，權將軍者，李過也（自成侄），自成聞其美而奪之。」此外又有各種不同說法。

三月二十七日，吳三桂率領約五、六萬勤王兵馬到達距離北京城兩日路程的玉田縣，與先期到達的上司薊遼督師王永吉會合。此時此地，他們應該收到北京城陷，崇禎帝殉國，明朝變天的消息，考慮何去何從。他們可以有三個選擇：一、向李自成投降，為新朝效力；二、據守山海關以自保；三、向清國借兵。

當然，據關自保是下策，憑山海關兵力，難以抵擋李自成大軍。降附新朝應該是較佳選擇。然而，李自成部屬為了「追贓」搜刮分肥，未有積極爭取吳三桂、王永吉歸降，甚至未有派兵控制長城要塞。而吳三桂、王永吉在玉田縣得知李自成在北京酷刑「追贓」，全城陷於恐慌，而且吳三桂父親被拷打受傷，生死未明，愛人陳圓圓被奪，於是決定回師山海關。四月初九日，頓兵關門，與軍民商討今後路向。

李自成得知吳三桂退守關門，開始察覺事態嚴重，於是下令停止「追贓」，派明朝降將唐通招安吳三桂。吳三桂為免被李自成奪去兵權，三月初十日，與將士議定向清國借兵，派使者向清國攝政王多爾袞求助。李自成得知吳三桂拒絕招安，決定親自率領大軍進攻山海關。
