
崇禎十六年，公元1643年底，李自成率領號稱百萬大軍，迅速佔領陝西全省。翌年正月初一，建國稱帝，國號「大順」，改年號為「永昌」。李自成在「西京」西安設立政府架構，改明朝「六部」為「六政府」，以及各級衙門，處理日常政務，並且大封功臣。大順元年二月初二，即明崇禎十七年，公元1644年，李自成大軍在山西南部渡過黃河，攻下蒲州、汾州，初五攻陷山西省會太原。

李自成大軍攻入陝西的消息傳到北京，崇禎帝及文武大臣驚惶失措，有大臣建議崇禎帝遷都到南京暫避，但崇禎帝猶豫不決。又有大臣建議放棄山海關以東的寧遠城，召吳三桂領兵拱衛京師。但崇禎帝不願意承擔割棄國土的污名。

三月初一日，李自成大軍攻克山西大同重要關隘寧武關，明軍傷亡慘重。李自成乘勝攻破有北京鎖鑰之稱的居庸關、昌平，勢如破竹，明朝守將紛紛叛變，北京城外圍已無險可守。在形勢極端危急之下，崇禎帝下定決心，於三月六日頒下聖旨，命薊遼總督王永吉、遼東總兵吳三桂放棄山海關外的寧遠等城，率領部屬入京，保衛京師。
