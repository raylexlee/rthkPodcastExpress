1839年6月虎門銷煙後，鴉片貿易從地上進入地下愈演愈烈，而林則徐繼續採取強硬立場，要求外國鴉片商人立下文書，保證永不夾帶鴉片到中國來，結果遭到英國商人的堅決抵制。

1839年7月，九龍尖沙咀村發生林維喜案。英國水兵在村內醉酒鬧事，打死村民林維喜，林則徐要求英國商務總監義律交出兇手，義律卻自行輕判了事。1839年8月15日，林則徐下令禁止一切貿易，派兵進入澳門，更進一步驅逐英人出境。此事因而成為鴉片戰爭的導火線。1839年10月1日，英國內閣以商務受阻及大英子民生命受到威脅為理由，作出「派遣艦隊去中國海」的決定。1840年2月，英國政府任命懿律和義律為正、副全權代表，懿律為英軍總司令。4月，英國國會對此進行激烈辯論，最終以271票對262票，9 票之差，通過軍事行動 ，但英政府始終未正式宣戰，認為軍事行動只是一種報復，而非戰爭。6月，懿律率領的英國艦船40多艘及士兵4000人，從印度出發到達中國海面，標誌著鴉片戰爭正式開始。

根據外相巴麥尊的指示，英國軍隊迅速封鎖廣州、廈門並於7月攻佔浙江定海，作為前進據點。此時，中國沿海地區，除廣東在林則徐管轄下稍作戰備外，其餘均防備鬆弛。8月，英艦以驚人的速度攻城掠地，抵達天津大沽口外，本來主張戰爭的道光帝，眼見英艦迫近，懾於兵威，開始動搖，1840年8月20日，道光帝批答英國書，令琦善轉告英人，允許通商和懲辦林則徐，以此求得英艦撤至廣州，並派琦善南下廣州談判。10月，琦善署理兩廣總督。林則徐、鄧廷楨被革職。12月，琦善通過翻譯與義律談判，拖延時間。英軍南下後，清廷下令沿海各省督撫籌防海口，並命兩江總督伊裡布率兵至浙東，準備收復定海。

1841年1月7日，英軍突然攻佔虎門的大角、沙角炮臺，清守軍死傷700多人。琦善被迫讓步，1月25日與義律簽訂《穿鼻草約》，條約第一款就是將香港島割與英國。第二天，英國軍隊就佔領了香港島。林則徐被發配新疆，他雖上書道光帝，力言必須禁煙和重視海防，使被道光帝斥為一片胡言。不過《穿鼻草約》由始至終並未經中國皇帝批准，而琦善也沒有蓋用關防印，因此該條約不具法律效力。
